# =========================================
# DEV profile (local development with MySQL)
# =========================================

# --- DataSource (explicit defaults to avoid "using password: NO") ---
# If DB_* env vars are not exported, these safe defaults are used locally.
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/reservasdb?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&createDatabaseIfNotExist=true}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:Tina050898}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- Hikari (sane dev defaults) ---
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000

# --- JPA / Hibernate ---
# Use MySQL 8 dialect explicitly in dev to avoid guessing issues.
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
# 'update' is convenient for local dev (keeps schema in sync without dropping data).
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# --- SQL init / schema initialization ---
# We let Hibernate handle schema updates in dev; disable SQL init unless you need scripts.
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=false

# --- Server ---
# Mirror your PORT variable but with a clearer name; default remains 8080.
server.port=${SERVER_PORT:8080}

# --- JWT (use a long, non-production secret by default in dev) ---
jwt.secret=${JWT_SECRET:please-change-this-64-byte-secret-key-1234567890abcdef}
jwt.expiration=${JWT_EXPIRATION:86400000}

# --- Mail (Mailpit by default for local testing) ---
spring.mail.host=${MAIL_HOST:localhost}
spring.mail.port=${MAIL_PORT:1025}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_SMTP_STARTTLS:false}


# --- Actuator in dev ---
# Health and info are typically open in dev; security layer can also use the flag below.
management.endpoints.web.exposure.include=health,info
app.security.actuator.info-public=${ACTUATOR_INFO_PUBLIC:true}
